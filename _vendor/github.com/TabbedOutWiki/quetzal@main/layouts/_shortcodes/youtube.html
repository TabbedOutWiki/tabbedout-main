{{- $videoID := .Get "id" | htmlEscape | safeURL -}}
{{- $startTime := .Get "start" -}}
{{- $validID := findRE "^[\\w-]{11}$" $videoID -}}
{{- if gt (len $validID) 0 -}}
<a
  href="https://youtu.be/{{ $videoID }}{{ with $startTime }}&t={{ . }}{{ end }}"
  rel="noopener noreferrer"
  target="_blank"
  class="yt-thumbnail"
>
  <img
    src="https://img.youtube.com/vi/{{ $videoID }}/hqdefault.jpg"
    alt="YouTube video thumbnail"
    loading="lazy"
    width="480"
    height="270"
  >
  <div class="play-button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
      <polygon points="0 0, 24 12, 0 24" fill="#fff"></polygon>
    </svg>
  </div>
</a>
<style>
  .yt-thumbnail {
    position: relative;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    margin: 0.5rem;
    max-width: 480px;
    background: #0a0a0a;
    border-radius: 12px;
  }

  .yt-thumbnail img {
    object-fit: cover;
    aspect-ratio: 16 / 9;
    max-width: 100%;
    height: auto;
  }

  .yt-thumbnail .play-button {
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    background: rgba(0,0,0,0.75);
    width: 20%;
    height: 20%;
    border-radius: 12px;
  }

  .yt-thumbnail .play-button svg {
    width: 25%;
    height: auto;
  }

  .yt-thumbnail:hover .play-button {
    background: #FF0000;
  }
</style>
{{- else -}}
<p style="color: var(--err)">Invalid YouTube video ID.</p>
{{- end -}}
